<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5G NR Resource Element Mapping - Advanced Guide</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Modern Color Palette */
            --bg-body: #0a0e27;
            --bg-card: #151b3d;
            --primary-purple: #a855f7;
            --primary-cyan: #06b6d4;
            --primary-magenta: #ec4899;
            --primary-teal: #14b8a6;
            --accent-orange: #f59e0b;
            --accent-green: #22c55e;
            --text-main: #f8fafc;
            --text-dim: #94a3b8;
            --border: #1e293b;
            --code-bg: #1e1e2e;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f4d 100%);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            line-height: 1.8;
            padding-bottom: 50px;
            min-height: 100vh;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.15) 0%, rgba(20, 184, 166, 0.15) 100%);
            padding: 50px 40px;
            border-bottom: 3px solid var(--primary-teal);
            text-align: center;
            backdrop-filter: blur(15px);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(20, 184, 166, 0.15) 0%, transparent 70%);
            animation: rotate 25s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .logo { 
            font-weight: 800; 
            font-size: 2.5rem; 
            background: linear-gradient(135deg, var(--primary-teal) 0%, var(--primary-cyan) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -2px;
            position: relative;
            z-index: 1;
            margin-bottom: 10px;
        }
        
        .logo i {
            color: var(--primary-teal);
            margin-right: 15px;
        }

        .header-desc { 
            color: var(--text-dim); 
            font-size: 1.1rem; 
            margin-top: 15px;
            position: relative;
            z-index: 1;
            font-weight: 300;
        }

        .container { 
            max-width: 1400px; 
            margin: 0 auto; 
            padding: 40px 25px; 
        }

        /* Section Styles */
        .section {
            margin-bottom: 60px;
            animation: fadeInUp 0.8s ease-out;
        }

        @keyframes fadeInUp { 
            from { opacity: 0; transform: translateY(40px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border);
        }

        .section-header i {
            font-size: 2rem;
            color: var(--primary-teal);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .section-header h2 {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-teal) 0%, var(--primary-cyan) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Info Cards */
        .info-card {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(21, 27, 61, 0.9) 100%);
            padding: 40px;
            border-radius: 25px;
            border: 1px solid var(--border);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 30px;
        }

        .info-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 60px rgba(20, 184, 166, 0.3);
            border-color: var(--primary-teal);
        }

        .info-card h3 {
            color: var(--primary-teal);
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .info-card p {
            color: var(--text-dim);
            font-size: 1.05rem;
            line-height: 2;
            margin-bottom: 15px;
        }

        /* Grid Layout */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
        }

        @media (max-width: 1024px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }

        /* Architecture Diagram */
        .architecture-container {
            background: rgba(0, 0, 0, 0.4);
            padding: 40px;
            border-radius: 20px;
            border: 2px solid var(--primary-teal);
            position: relative;
            overflow: hidden;
        }

        .architecture-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(20, 184, 166, 0.05) 0%, transparent 100%);
            pointer-events: none;
        }

        .arch-layer {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.1) 0%, rgba(6, 182, 212, 0.1) 100%);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
        }

        .arch-layer:hover {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(6, 182, 212, 0.2) 100%);
            border-color: var(--primary-teal);
            transform: scale(1.02);
        }

        .arch-layer h4 {
            color: var(--primary-cyan);
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .arch-layer p {
            color: var(--text-dim);
            font-size: 0.95rem;
        }

        .arch-arrow {
            text-align: center;
            font-size: 2rem;
            color: var(--primary-teal);
            margin: 15px 0;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* RE Map Visualization */
        .re-map-visual {
            background: rgba(0, 0, 0, 0.6);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid var(--primary-magenta);
            margin: 30px 0;
        }

        .re-grid {
            display: grid;
            grid-template-columns: repeat(14, 1fr);
            gap: 4px;
            margin: 20px 0;
        }

        .re-cell {
            aspect-ratio: 1;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .re-cell:hover {
            transform: scale(1.2);
            z-index: 10;
            box-shadow: 0 0 20px currentColor;
        }

        .re-data {
            background: linear-gradient(135deg, var(--primary-teal) 0%, #0d9488 100%);
            color: white;
        }

        .re-dmrs {
            background: linear-gradient(135deg, var(--accent-orange) 0%, #ea580c 100%);
            color: white;
        }

        .re-control {
            background: linear-gradient(135deg, var(--primary-purple) 0%, #9333ea 100%);
            color: white;
        }

        .re-ptrs {
            background: linear-gradient(135deg, var(--primary-cyan) 0%, #0891b2 100%);
            color: white;
        }

        .re-csirs {
            background: linear-gradient(135deg, var(--primary-magenta) 0%, #db2777 100%);
            color: white;
        }

        .re-empty {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        /* Code Block */
        .code-container {
            background: var(--code-bg);
            border-radius: 20px;
            border: 2px solid var(--primary-purple);
            overflow: hidden;
            margin: 30px 0;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
        }

        .code-header {
            background: linear-gradient(135deg, var(--primary-purple) 0%, #9333ea 100%);
            padding: 15px 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .code-header h4 {
            color: white;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .code-lang {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .code-content {
            padding: 30px;
            overflow-x: auto;
        }

        .code-content pre {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.8;
            color: #e0e0e0;
        }

        .code-content code {
            color: #e0e0e0;
        }

        /* Syntax Highlighting */
        .keyword { color: #c678dd; font-weight: 600; }
        .type { color: #61afef; }
        .function { color: #61afef; }
        .string { color: #98c379; }
        .number { color: #d19a66; }
        .comment { color: #5c6370; font-style: italic; }
        .operator { color: #56b6c2; }
        .preprocessor { color: #e06c75; }

        /* Stats Box */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-box {
            background: linear-gradient(135deg, rgba(20, 184, 166, 0.1) 0%, rgba(6, 182, 212, 0.1) 100%);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--primary-teal);
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(20, 184, 166, 0.3);
        }

        .stat-box i {
            font-size: 2.5rem;
            color: var(--primary-teal);
            margin-bottom: 15px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-main);
            margin-bottom: 10px;
        }

        .stat-label {
            color: var(--text-dim);
            font-size: 0.95rem;
        }

        /* Feature Cards */
        .feature-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .feature-card {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.05) 0%, rgba(236, 72, 153, 0.05) 100%);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            border-color: var(--primary-magenta);
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.1) 0%, rgba(236, 72, 153, 0.1) 100%);
            transform: translateY(-5px);
        }

        .feature-card i {
            font-size: 2.5rem;
            color: var(--primary-magenta);
            margin-bottom: 15px;
        }

        .feature-card h4 {
            color: var(--text-main);
            font-size: 1.3rem;
            margin-bottom: 15px;
        }

        .feature-card p {
            color: var(--text-dim);
            font-size: 0.95rem;
            line-height: 1.8;
        }

        /* Process Flow */
        .process-flow {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
            overflow-x: auto;
            padding: 20px;
        }

        .process-step {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(21, 27, 61, 0.9) 100%);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--primary-cyan);
            min-width: 200px;
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
        }

        .process-step:hover {
            transform: scale(1.05);
            border-color: var(--primary-teal);
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);
        }

        .process-step .step-number {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, var(--primary-cyan) 0%, var(--primary-teal) 100%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.2rem;
            box-shadow: 0 5px 15px rgba(6, 182, 212, 0.4);
        }

        .process-step h5 {
            color: var(--primary-cyan);
            margin: 20px 0 10px 0;
            font-size: 1.1rem;
        }

        .process-step p {
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        .process-arrow {
            font-size: 2rem;
            color: var(--primary-teal);
        }

        /* Highlight Box */
        .highlight-box {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(20, 184, 166, 0.1) 100%);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid var(--accent-green);
            margin: 25px 0;
        }

        .highlight-box h4 {
            color: var(--accent-green);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .highlight-box p {
            color: var(--text-dim);
            line-height: 2;
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.6) 0%, rgba(21, 27, 61, 0.6) 100%);
            padding: 30px;
            text-align: center;
            border-top: 2px solid var(--primary-teal);
            margin-top: 60px;
        }

        footer p {
            color: var(--text-dim);
            font-size: 0.95rem;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-body);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-teal) 0%, var(--primary-cyan) 100%);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-cyan) 0%, var(--primary-teal) 100%);
        }

        /* Interactive Elements */
        .interactive-demo {
            background: rgba(0, 0, 0, 0.4);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid var(--primary-purple);
            margin: 30px 0;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group label {
            color: var(--text-main);
            font-weight: 600;
            display: block;
            margin-bottom: 10px;
        }

        .control-group select,
        .control-group input {
            width: 100%;
            padding: 12px;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .control-group select:focus,
        .control-group input:focus {
            outline: none;
            border-color: var(--primary-teal);
            box-shadow: 0 0 20px rgba(20, 184, 166, 0.3);
        }

        button {
            background: linear-gradient(135deg, var(--primary-teal) 0%, var(--primary-cyan) 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(20, 184, 166, 0.4);
        }

        /* Table Styling */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            overflow: hidden;
        }

        table thead {
            background: linear-gradient(135deg, var(--primary-teal) 0%, var(--primary-cyan) 100%);
        }

        table th {
            padding: 15px;
            color: white;
            font-weight: 700;
            text-align: left;
        }

        table td {
            padding: 15px;
            color: var(--text-dim);
            border-bottom: 1px solid var(--border);
        }

        table tr:hover {
            background: rgba(20, 184, 166, 0.1);
        }
    </style>
</head>
<body>

<header>
    <h1 class="logo"><i class="fas fa-th"></i>5G NR Resource Element Mapping</h1>
    <p class="header-desc">Understanding the Foundation of 5G Physical Layer Resource Allocation</p>
</header>

<div class="container">
    
    <!-- Introduction Section -->
    <section class="section">
        <div class="section-header">
            <i class="fas fa-info-circle"></i>
            <h2>What is Resource Element Mapping?</h2>
        </div>
        
        <div class="info-card">
            <h3><i class="fas fa-cube"></i> Introduction to RE Mapping</h3>
            <p>
                Resource Element (RE) Mapping is a critical process in 5G New Radio (NR) physical layer that determines how data, control information, and reference signals are precisely positioned within the time-frequency grid. Each Resource Element represents the smallest unit of the radio interface, defined as one subcarrier during one OFDM symbol duration. The mapping process ensures efficient utilization of spectrum resources while maintaining signal integrity and enabling advanced MIMO capabilities.
            </p>
            <p>
                The RE mapping mechanism in 5G NR is significantly more flexible compared to LTE, supporting multiple numerologies (subcarrier spacings), dynamic TDD configurations, and adaptive resource allocation. This flexibility enables 5G to support diverse use cases ranging from enhanced Mobile Broadband (eMBB) requiring high data rates, Ultra-Reliable Low-Latency Communications (URLLC) demanding millisecond-level latency, and massive Machine-Type Communications (mMTC) connecting billions of IoT devices. The mapping strategy must account for various physical channels including PDSCH (Physical Downlink Shared Channel), PUSCH (Physical Uplink Shared Channel), and control channels, while reserving specific REs for synchronization signals, reference signals, and guard bands.
            </p>
            <p>
                Understanding RE mapping is essential for optimizing 5G network performance, as it directly impacts spectral efficiency, throughput, latency, and coverage. The mapping algorithm must intelligently handle resource allocation considering factors such as channel quality indicators (CQI), modulation and coding schemes (MCS), HARQ retransmissions, and interference management. Modern 5G implementations use sophisticated scheduling algorithms that dynamically adjust RE mapping patterns based on real-time network conditions, user equipment capabilities, and service requirements. This adaptive approach ensures optimal resource utilization while maintaining quality of service guarantees for different traffic types and priority levels.
            </p>
        </div>
    </section>

    <!-- Architecture Section -->
    <section class="section">
        <div class="section-header">
            <i class="fas fa-project-diagram"></i>
            <h2>RE Mapping Architecture</h2>
        </div>

        <div class="architecture-container">
            <div class="arch-layer">
                <h4><i class="fas fa-layer-group"></i> Layer 1: Time-Frequency Grid Formation</h4>
                <p>Establishment of the basic OFDM grid structure with configurable numerology (μ = 0-4), defining subcarrier spacing and symbol duration</p>
            </div>
            <div class="arch-arrow"><i class="fas fa-arrow-down"></i></div>
            
            <div class="arch-layer">
                <h4><i class="fas fa-th-large"></i> Layer 2: Resource Block Allocation</h4>
                <p>Division of spectrum into Resource Blocks (12 subcarriers × 14 OFDM symbols), serving as the fundamental scheduling unit</p>
            </div>
            <div class="arch-arrow"><i class="fas fa-arrow-down"></i></div>
            
            <div class="arch-layer">
                <h4><i class="fas fa-broadcast-tower"></i> Layer 3: Reference Signal Mapping</h4>
                <p>Placement of DMRS (Demodulation Reference Signals), CSI-RS (Channel State Information RS), and PT-RS (Phase Tracking RS)</p>
            </div>
            <div class="arch-arrow"><i class="fas fa-arrow-down"></i></div>
            
            <div class="arch-layer">
                <h4><i class="fas fa-sliders-h"></i> Layer 4: Control Channel Mapping</h4>
                <p>Allocation of PDCCH (Physical Downlink Control Channel) in CORESET regions for scheduling and control information</p>
            </div>
            <div class="arch-arrow"><i class="fas fa-arrow-down"></i></div>
            
            <div class="arch-layer">
                <h4><i class="fas fa-database"></i> Layer 5: Data Channel Mapping</h4>
                <p>PDSCH/PUSCH resource element mapping for user data, avoiding reserved REs for reference signals and control channels</p>
            </div>
        </div>
    </section>

    <!-- RE Map Visualization -->
    <section class="section">
        <div class="section-header">
            <i class="fas fa-grip-horizontal"></i>
            <h2>Interactive RE Map Visualization</h2>
        </div>

        <div class="re-map-visual">
            <h3 style="color: var(--primary-teal); margin-bottom: 20px; text-align: center;">
                <i class="fas fa-chart-bar"></i> Single Resource Block (12 subcarriers × 14 OFDM symbols)
            </h3>
            
            <div style="display: flex; justify-content: space-between; margin-bottom: 15px; padding: 0 10px;">
                <span style="color: var(--text-dim); font-size: 0.9rem;">
                    <i class="fas fa-arrows-alt-h"></i> 14 OFDM Symbols (Time Domain) →
                </span>
                <span style="color: var(--text-dim); font-size: 0.9rem;">
                    ↓ 12 Subcarriers (Frequency Domain) <i class="fas fa-arrows-alt-v"></i>
                </span>
            </div>

            <div id="reMapGrid" class="re-grid"></div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color re-data"></div>
                    <span><i class="fas fa-database"></i> Data (PDSCH/PUSCH)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color re-dmrs"></div>
                    <span><i class="fas fa-signal"></i> DMRS (Demod Reference)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color re-control"></div>
                    <span><i class="fas fa-cog"></i> Control (PDCCH)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color re-ptrs"></div>
                    <span><i class="fas fa-crosshairs"></i> PT-RS (Phase Tracking)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color re-csirs"></div>
                    <span><i class="fas fa-chart-line"></i> CSI-RS (Channel Info)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color re-empty"></div>
                    <span><i class="fas fa-ban"></i> Reserved/Guard</span>
                </div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-box">
                <i class="fas fa-th"></i>
                <div class="stat-value">168</div>
                <div class="stat-label">Total REs per RB</div>
            </div>
            <div class="stat-box">
                <i class="fas fa-database"></i>
                <div class="stat-value">~120</div>
                <div class="stat-label">Data REs (typical)</div>
            </div>
            <div class="stat-box">
                <i class="fas fa-signal"></i>
                <div class="stat-value">~24</div>
                <div class="stat-label">DMRS REs</div>
            </div>
            <div class="stat-box">
                <i class="fas fa-cog"></i>
                <div class="stat-value">~24</div>
                <div class="stat-label">Control/Other REs</div>
            </div>
        </div>
    </section>

    <!-- Key Features -->
    <section class="section">
        <div class="section-header">
            <i class="fas fa-star"></i>
            <h2>Key Features of RE Mapping</h2>
        </div>

        <div class="feature-cards">
            <div class="feature-card">
                <i class="fas fa-layer-group"></i>
                <h4>Multiple Numerologies</h4>
                <p>Support for subcarrier spacings from 15 kHz to 240 kHz (μ=0 to μ=4), enabling flexible spectrum utilization for different frequency bands and use cases.</p>
            </div>

            <div class="feature-card">
                <i class="fas fa-project-diagram"></i>
                <h4>MIMO Support</h4>
                <p>Advanced mapping for multi-layer transmission with support for up to 8 layers in downlink and 4 layers in uplink, maximizing spectral efficiency.</p>
            </div>

            <div class="feature-card">
                <i class="fas fa-sync-alt"></i>
                <h4>Dynamic Resource Allocation</h4>
                <p>Flexible scheduling at slot, mini-slot, or symbol level granularity, enabling ultra-low latency for URLLC applications.</p>
            </div>

            <div class="feature-card">
                <i class="fas fa-shield-alt"></i>
                <h4>Reference Signal Patterns</h4>
                <p>Configurable DMRS patterns (Type 1 and Type 2) with front-loaded or additional positions for channel estimation and beamforming.</p>
            </div>

            <div class="feature-card">
                <i class="fas fa-chart-line"></i>
                <h4>Adaptive MCS</h4>
                <p>Support for modulation schemes from QPSK to 256-QAM with adaptive coding rates, optimizing throughput based on channel conditions.</p>
            </div>

            <div class="feature-card">
                <i class="fas fa-arrows-alt"></i>
                <h4>Bandwidth Part (BWP)</h4>
                <p>Multiple BWP configurations allowing UE to operate on different bandwidth portions, reducing power consumption for low-data applications.</p>
            </div>
        </div>
    </section>

    <!-- Mapping Process -->
    <section class="section">
        <div class="section-header">
            <i class="fas fa-tasks"></i>
            <h2>RE Mapping Process Flow</h2>
        </div>

        <div class="process-flow">
            <div class="process-step">
                <div class="step-number">1</div>
                <i class="fas fa-check-circle" style="font-size: 2rem; color: var(--primary-cyan);"></i>
                <h5>Resource Allocation</h5>
                <p>Scheduler assigns time-frequency resources based on QoS requirements</p>
            </div>

            <div class="process-arrow"><i class="fas fa-arrow-right"></i></div>

            <div class="process-step">
                <div class="step-number">2</div>
                <i class="fas fa-code" style="font-size: 2rem; color: var(--primary-cyan);"></i>
                <h5>Channel Coding</h5>
                <p>Apply LDPC encoding, rate matching, and modulation mapping</p>
            </div>

            <div class="process-arrow"><i class="fas fa-arrow-right"></i></div>

            <div class="process-step">
                <div class="step-number">3</div>
                <i class="fas fa-layer-group" style="font-size: 2rem; color: var(--primary-cyan);"></i>
                <h5>Layer Mapping</h5>
                <p>Map coded bits to transmission layers for MIMO processing</p>
            </div>

            <div class="process-arrow"><i class="fas fa-arrow-right"></i></div>

            <div class="process-step">
                <div class="step-number">4</div>
                <i class="fas fa-broadcast-tower" style="font-size: 2rem; color: var(--primary-cyan);"></i>
                <h5>Precoding</h5>
                <p>Apply precoding matrix for beamforming and spatial multiplexing</p>
            </div>

            <div class="process-arrow"><i class="fas fa-arrow-right"></i></div>

            <div class="process-step">
                <div class="step-number">5</div>
                <i class="fas fa-th"></i>
                <h5>RE Mapping</h5>
                <p>Map to specific REs avoiding reference signals and control regions</p>
            </div>
        </div>

        <div class="highlight-box">
            <h4><i class="fas fa-lightbulb"></i> Key Insight</h4>
            <p>
                The RE mapping process must be highly coordinated with reference signal placement. DMRS (Demodulation Reference Signals) are crucial for channel estimation and must be mapped to specific REs according to configured patterns. The mapper skips these REs when placing data symbols, ensuring clean separation between data and reference signals. This coordination is critical for achieving high-order MIMO performance and maintaining signal quality in high-mobility scenarios.
            </p>
        </div>
    </section>

    <!-- C++ Implementation -->
    <section class="section">
        <div class="section-header">
            <i class="fas fa-code"></i>
            <h2>C++ Implementation</h2>
        </div>

        <div class="code-container">
            <div class="code-header">
                <h4><i class="fas fa-file-code"></i> REMapper.cpp - Resource Element Mapping Implementation</h4>
                <span class="code-lang">C++17</span>
            </div>
            <div class="code-content">
<pre><code><span class="preprocessor">#include</span> <span class="string">&lt;iostream&gt;</span>
<span class="preprocessor">#include</span> <span class="string">&lt;vector&gt;</span>
<span class="preprocessor">#include</span> <span class="string">&lt;complex&gt;</span>
<span class="preprocessor">#include</span> <span class="string">&lt;map&gt;</span>
<span class="preprocessor">#include</span> <span class="string">&lt;cmath&gt;</span>

<span class="keyword">using namespace</span> std;

<span class="comment">// Resource Element structure</span>
<span class="keyword">struct</span> <span class="type">ResourceElement</span> {
    <span class="type">complex</span>&lt;<span class="type">double</span>&gt; data;        <span class="comment">// Complex symbol</span>
    <span class="type">int</span> subcarrierIndex;              <span class="comment">// 0-11 in an RB</span>
    <span class="type">int</span> symbolIndex;                  <span class="comment">// 0-13 in a slot</span>
    <span class="keyword">enum</span> <span class="type">REType</span> { DATA, DMRS, PTRS, CSIRS, CONTROL, EMPTY } type;
};

<span class="comment">// RE Mapping Configuration</span>
<span class="keyword">struct</span> <span class="type">REMapConfig</span> {
    <span class="type">int</span> numerology;                   <span class="comment">// μ = 0, 1, 2, 3, 4</span>
    <span class="type">int</span> numRBs;                       <span class="comment">// Number of Resource Blocks</span>
    <span class="type">int</span> numLayers;                    <span class="comment">// MIMO layers (1-8 for DL)</span>
    <span class="type">int</span> dmrsType;                     <span class="comment">// Type 1 or Type 2</span>
    <span class="type">vector</span>&lt;<span class="type">int</span>&gt; dmrsSymbols;       <span class="comment">// DMRS symbol positions</span>
    <span class="type">bool</span> ptrsEnabled;                 <span class="comment">// PT-RS enable/disable</span>
    <span class="type">int</span> modulation;                   <span class="comment">// 2=QPSK, 4=16QAM, 6=64QAM, 8=256QAM</span>
};

<span class="comment">/**
 * @class REMapper
 * @brief Resource Element Mapper for 5G NR Physical Layer
 * 
 * This class implements the core RE mapping functionality for 5G NR,
 * handling resource allocation, reference signal placement, and data mapping.
 */</span>
<span class="keyword">class</span> <span class="type">REMapper</span> {
<span class="keyword">private</span>:
    <span class="type">REMapConfig</span> config;
    <span class="type">vector</span>&lt;<span class="type">vector</span>&lt;<span class="type">ResourceElement</span>&gt;&gt; reGrid;  <span class="comment">// [subcarrier][symbol]</span>
    <span class="type">int</span> totalSubcarriers;
    <span class="type">int</span> symbolsPerSlot;
    
    <span class="comment">/**
     * @brief Initialize the RE grid with empty resources
     */</span>
    <span class="keyword">void</span> <span class="function">initializeGrid</span>() {
        totalSubcarriers = config.numRBs * <span class="number">12</span>;
        symbolsPerSlot = <span class="number">14</span>;  <span class="comment">// Normal CP</span>
        
        reGrid.<span class="function">resize</span>(totalSubcarriers);
        <span class="keyword">for</span> (<span class="type">int</span> sc = <span class="number">0</span>; sc &lt; totalSubcarriers; sc++) {
            reGrid[sc].<span class="function">resize</span>(symbolsPerSlot);
            <span class="keyword">for</span> (<span class="type">int</span> sym = <span class="number">0</span>; sym &lt; symbolsPerSlot; sym++) {
                reGrid[sc][sym].subcarrierIndex = sc;
                reGrid[sc][sym].symbolIndex = sym;
                reGrid[sc][sym].type = <span class="type">ResourceElement</span>::EMPTY;
                reGrid[sc][sym].data = <span class="function">complex</span>&lt;<span class="type">double</span>&gt;(<span class="number">0.0</span>, <span class="number">0.0</span>);
            }
        }
    }
    
    <span class="comment">/**
     * @brief Map DMRS (Demodulation Reference Signals) to specific REs
     * 
     * DMRS Type 1: Maps to even or odd subcarriers
     * DMRS Type 2: Maps to groups of 2 consecutive subcarriers
     */</span>
    <span class="keyword">void</span> <span class="function">mapDMRS</span>() {
        <span class="keyword">for</span> (<span class="type">int</span> rbIdx = <span class="number">0</span>; rbIdx &lt; config.numRBs; rbIdx++) {
            <span class="type">int</span> rbStartSC = rbIdx * <span class="number">12</span>;
            
            <span class="keyword">for</span> (<span class="type">int</span> symIdx : config.dmrsSymbols) {
                <span class="keyword">if</span> (config.dmrsType == <span class="number">1</span>) {
                    <span class="comment">// Type 1: Every other subcarrier (6 DMRS REs per symbol per RB)</span>
                    <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; <span class="number">6</span>; k++) {
                        <span class="type">int</span> scIdx = rbStartSC + k * <span class="number">2</span>;  <span class="comment">// 0, 2, 4, 6, 8, 10</span>
                        reGrid[scIdx][symIdx].type = <span class="type">ResourceElement</span>::DMRS;
                        <span class="comment">// Generate DMRS sequence (simplified - real implementation uses gold sequence)</span>
                        reGrid[scIdx][symIdx].data = <span class="function">generateDMRSSymbol</span>(rbIdx, k, symIdx);
                    }
                } <span class="keyword">else</span> <span class="keyword">if</span> (config.dmrsType == <span class="number">2</span>) {
                    <span class="comment">// Type 2: Consecutive pairs (4 DMRS REs per symbol per RB)</span>
                    <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) {
                        <span class="type">int</span> scIdx1 = rbStartSC + k * <span class="number">3</span>;      <span class="comment">// 0, 3, 6, 9</span>
                        <span class="type">int</span> scIdx2 = rbStartSC + k * <span class="number">3</span> + <span class="number">1</span>;  <span class="comment">// 1, 4, 7, 10</span>
                        reGrid[scIdx1][symIdx].type = <span class="type">ResourceElement</span>::DMRS;
                        reGrid[scIdx2][symIdx].type = <span class="type">ResourceElement</span>::DMRS;
                        reGrid[scIdx1][symIdx].data = <span class="function">generateDMRSSymbol</span>(rbIdx, k*<span class="number">2</span>, symIdx);
                        reGrid[scIdx2][symIdx].data = <span class="function">generateDMRSSymbol</span>(rbIdx, k*<span class="number">2</span>+<span class="number">1</span>, symIdx);
                    }
                }
            }
        }
    }
    
    <span class="comment">/**
     * @brief Map PT-RS (Phase Tracking Reference Signals) for phase noise compensation
     * PT-RS is typically used for higher frequency bands (FR2/mmWave)
     */</span>
    <span class="keyword">void</span> <span class="function">mapPTRS</span>() {
        <span class="keyword">if</span> (!config.ptrsEnabled) <span class="keyword">return</span>;
        
        <span class="comment">// PT-RS placement depends on scheduled bandwidth and MCS</span>
        <span class="comment">// Simplified: Place PT-RS every 4th RB, avoiding DMRS symbols</span>
        <span class="keyword">for</span> (<span class="type">int</span> rbIdx = <span class="number">0</span>; rbIdx &lt; config.numRBs; rbIdx += <span class="number">4</span>) {
            <span class="type">int</span> scIdx = rbIdx * <span class="number">12</span>;  <span class="comment">// First subcarrier of RB</span>
            
            <span class="keyword">for</span> (<span class="type">int</span> sym = <span class="number">0</span>; sym &lt; symbolsPerSlot; sym++) {
                <span class="comment">// Skip DMRS symbols and control symbols</span>
                <span class="keyword">if</span> (reGrid[scIdx][sym].type == <span class="type">ResourceElement</span>::EMPTY) {
                    reGrid[scIdx][sym].type = <span class="type">ResourceElement</span>::PTRS;
                    reGrid[scIdx][sym].data = <span class="function">generatePTRSSymbol</span>(rbIdx, sym);
                }
            }
        }
    }
    
    <span class="comment">/**
     * @brief Map control channel (PDCCH/PUCCH) resources
     * Typically occupies first 1-3 symbols of a slot
     */</span>
    <span class="keyword">void</span> <span class="function">mapControlChannel</span>(<span class="type">int</span> controlSymbols) {
        <span class="keyword">for</span> (<span class="type">int</span> sym = <span class="number">0</span>; sym &lt; controlSymbols; sym++) {
            <span class="keyword">for</span> (<span class="type">int</span> sc = <span class="number">0</span>; sc &lt; totalSubcarriers; sc++) {
                <span class="keyword">if</span> (reGrid[sc][sym].type == <span class="type">ResourceElement</span>::EMPTY) {
                    reGrid[sc][sym].type = <span class="type">ResourceElement</span>::CONTROL;
                }
            }
        }
    }
    
    <span class="comment">/**
     * @brief Map data symbols (PDSCH/PUSCH) to available REs
     * @param dataSymbols Vector of modulated symbols to be mapped
     * @return Number of REs used for data
     */</span>
    <span class="type">int</span> <span class="function">mapDataSymbols</span>(<span class="keyword">const</span> <span class="type">vector</span>&lt;<span class="type">complex</span>&lt;<span class="type">double</span>&gt;&gt;&amp; dataSymbols) {
        <span class="type">int</span> dataIdx = <span class="number">0</span>;
        <span class="type">int</span> mappedREs = <span class="number">0</span>;
        
        <span class="comment">// Map in frequency-first, then time order</span>
        <span class="keyword">for</span> (<span class="type">int</span> sym = <span class="number">0</span>; sym &lt; symbolsPerSlot; sym++) {
            <span class="keyword">for</span> (<span class="type">int</span> sc = <span class="number">0</span>; sc &lt; totalSubcarriers; sc++) {
                <span class="keyword">if</span> (reGrid[sc][sym].type == <span class="type">ResourceElement</span>::EMPTY) {
                    <span class="keyword">if</span> (dataIdx &lt; dataSymbols.<span class="function">size</span>()) {
                        reGrid[sc][sym].type = <span class="type">ResourceElement</span>::DATA;
                        reGrid[sc][sym].data = dataSymbols[dataIdx++];
                        mappedREs++;
                    }
                }
            }
        }
        
        <span class="keyword">return</span> mappedREs;
    }
    
    <span class="comment">/**
     * @brief Generate DMRS symbol using pseudo-random sequence
     * Real implementation would use 3GPP gold sequence
     */</span>
    <span class="type">complex</span>&lt;<span class="type">double</span>&gt; <span class="function">generateDMRSSymbol</span>(<span class="type">int</span> rb, <span class="type">int</span> k, <span class="type">int</span> l) {
        <span class="comment">// Simplified DMRS generation (should use gold sequence in real implementation)</span>
        <span class="type">double</span> phase = <span class="number">2.0</span> * M_PI * (rb * <span class="number">7</span> + k * <span class="number">13</span> + l * <span class="number">17</span>) / <span class="number">31.0</span>;
        <span class="keyword">return</span> <span class="function">complex</span>&lt;<span class="type">double</span>&gt;(<span class="function">cos</span>(phase) / <span class="function">sqrt</span>(<span class="number">2</span>), <span class="function">sin</span>(phase) / <span class="function">sqrt</span>(<span class="number">2</span>));
    }
    
    <span class="comment">/**
     * @brief Generate PT-RS symbol
     */</span>
    <span class="type">complex</span>&lt;<span class="type">double</span>&gt; <span class="function">generatePTRSSymbol</span>(<span class="type">int</span> rb, <span class="type">int</span> l) {
        <span class="type">double</span> phase = <span class="number">2.0</span> * M_PI * (rb * <span class="number">11</span> + l * <span class="number">23</span>) / <span class="number">37.0</span>;
        <span class="keyword">return</span> <span class="function">complex</span>&lt;<span class="type">double</span>&gt;(<span class="function">cos</span>(phase), <span class="function">sin</span>(phase));
    }

<span class="keyword">public</span>:
    <span class="comment">/**
     * @brief Constructor
     * @param cfg RE mapping configuration
     */</span>
    <span class="function">REMapper</span>(<span class="keyword">const</span> <span class="type">REMapConfig</span>&amp; cfg) : config(cfg) {
        <span class="function">initializeGrid</span>();
    }
    
    <span class="comment">/**
     * @brief Perform complete RE mapping for a slot
     * @param dataSymbols Modulated data symbols to be mapped
     * @param controlSymbols Number of symbols for control channel
     * @return Mapping statistics
     */</span>
    <span class="type">map</span>&lt;<span class="type">string</span>, <span class="type">int</span>&gt; <span class="function">performMapping</span>(
        <span class="keyword">const</span> <span class="type">vector</span>&lt;<span class="type">complex</span>&lt;<span class="type">double</span>&gt;&gt;&amp; dataSymbols,
        <span class="type">int</span> controlSymbols = <span class="number">2</span>
    ) {
        <span class="comment">// Step 1: Map reference signals</span>
        <span class="function">mapDMRS</span>();
        <span class="function">mapPTRS</span>();
        
        <span class="comment">// Step 2: Map control channel</span>
        <span class="function">mapControlChannel</span>(controlSymbols);
        
        <span class="comment">// Step 3: Map data symbols to remaining REs</span>
        <span class="type">int</span> dataMapped = <span class="function">mapDataSymbols</span>(dataSymbols);
        
        <span class="comment">// Collect statistics</span>
        <span class="keyword">return</span> <span class="function">getStatistics</span>();
    }
    
    <span class="comment">/**
     * @brief Get RE mapping statistics
     */</span>
    <span class="type">map</span>&lt;<span class="type">string</span>, <span class="type">int</span>&gt; <span class="function">getStatistics</span>() {
        <span class="type">map</span>&lt;<span class="type">string</span>, <span class="type">int</span>&gt; stats;
        stats[<span class="string">"total"</span>] = <span class="number">0</span>;
        stats[<span class="string">"data"</span>] = <span class="number">0</span>;
        stats[<span class="string">"dmrs"</span>] = <span class="number">0</span>;
        stats[<span class="string">"ptrs"</span>] = <span class="number">0</span>;
        stats[<span class="string">"control"</span>] = <span class="number">0</span>;
        stats[<span class="string">"empty"</span>] = <span class="number">0</span>;
        
        <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; scVec : reGrid) {
            <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; re : scVec) {
                stats[<span class="string">"total"</span>]++;
                <span class="keyword">switch</span>(re.type) {
                    <span class="keyword">case</span> <span class="type">ResourceElement</span>::DATA:    stats[<span class="string">"data"</span>]++; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="type">ResourceElement</span>::DMRS:    stats[<span class="string">"dmrs"</span>]++; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="type">ResourceElement</span>::PTRS:    stats[<span class="string">"ptrs"</span>]++; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="type">ResourceElement</span>::CONTROL: stats[<span class="string">"control"</span>]++; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="type">ResourceElement</span>::EMPTY:   stats[<span class="string">"empty"</span>]++; <span class="keyword">break</span>;
                }
            }
        }
        
        <span class="keyword">return</span> stats;
    }
    
    <span class="comment">/**
     * @brief Print RE grid for visualization
     */</span>
    <span class="keyword">void</span> <span class="function">printGrid</span>() {
        cout &lt;&lt; <span class="string">"
RE Grid Visualization (Symbols 0-13, First 12 subcarriers)
"</span>;
        cout &lt;&lt; <span class="string">"D=Data, R=DMRS, P=PT-RS, C=Control, .=Empty
"</span>;
        
        <span class="keyword">for</span> (<span class="type">int</span> sc = <span class="number">11</span>; sc &gt;= <span class="number">0</span>; sc--) {
            <span class="function">printf</span>(<span class="string">"SC%2d: "</span>, sc);
            <span class="keyword">for</span> (<span class="type">int</span> sym = <span class="number">0</span>; sym &lt; symbolsPerSlot; sym++) {
                <span class="keyword">char</span> c = <span class="string">'.'</span>;
                <span class="keyword">switch</span>(reGrid[sc][sym].type) {
                    <span class="keyword">case</span> <span class="type">ResourceElement</span>::DATA:    c = <span class="string">'D'</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="type">ResourceElement</span>::DMRS:    c = <span class="string">'R'</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="type">ResourceElement</span>::PTRS:    c = <span class="string">'P'</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="type">ResourceElement</span>::CONTROL: c = <span class="string">'C'</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="type">ResourceElement</span>::EMPTY:   c = <span class="string">'.'</span>; <span class="keyword">break</span>;
                }
                cout &lt;&lt; c &lt;&lt; <span class="string">" "</span>;
            }
            cout &lt;&lt; <span class="string">"
"</span>;
        }
    }
    
    <span class="comment">/**
     * @brief Calculate spectral efficiency
     * @return Bits per RE
     */</span>
    <span class="type">double</span> <span class="function">calculateSpectralEfficiency</span>() {
        <span class="keyword">auto</span> stats = <span class="function">getStatistics</span>();
        <span class="type">int</span> dataREs = stats[<span class="string">"data"</span>];
        <span class="type">int</span> totalREs = stats[<span class="string">"total"</span>];
        
        <span class="comment">// Spectral efficiency = (Data REs / Total REs) × Modulation Order</span>
        <span class="keyword">return</span> (<span class="keyword">static_cast</span>&lt;<span class="type">double</span>&gt;(dataREs) / totalREs) * config.modulation;
    }
};

<span class="comment">/**
 * @brief Main function - Demonstration of RE Mapping
 */</span>
<span class="type">int</span> <span class="function">main</span>() {
    cout &lt;&lt; <span class="string">"========================================
"</span>;
    cout &lt;&lt; <span class="string">"5G NR Resource Element Mapping Demo
"</span>;
    cout &lt;&lt; <span class="string">"========================================

"</span>;
    
    <span class="comment">// Configure RE mapping</span>
    <span class="type">REMapConfig</span> config;
    config.numerology = <span class="number">1</span>;              <span class="comment">// 30 kHz SCS</span>
    config.numRBs = <span class="number">10</span>;                  <span class="comment">// 10 RBs = 120 subcarriers</span>
    config.numLayers = <span class="number">2</span>;                <span class="comment">// 2 MIMO layers</span>
    config.dmrsType = <span class="number">1</span>;                 <span class="comment">// DMRS Type 1</span>
    config.dmrsSymbols = {<span class="number">2</span>, <span class="number">11</span>};       <span class="comment">// DMRS in symbols 2 and 11</span>
    config.ptrsEnabled = <span class="keyword">true</span>;          <span class="comment">// Enable PT-RS</span>
    config.modulation = <span class="number">6</span>;               <span class="comment">// 64-QAM</span>
    
    <span class="comment">// Create mapper</span>
    <span class="type">REMapper</span> mapper(config);
    
    <span class="comment">// Generate dummy data symbols (would come from channel encoder in real system)</span>
    <span class="type">vector</span>&lt;<span class="type">complex</span>&lt;<span class="type">double</span>&gt;&gt; dataSymbols(<span class="number">1000</span>);
    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; dataSymbols.<span class="function">size</span>(); i++) {
        dataSymbols[i] = <span class="function">complex</span>&lt;<span class="type">double</span>&gt;(
            (<span class="type">double</span>)<span class="function">rand</span>() / RAND_MAX * <span class="number">2</span> - <span class="number">1</span>,
            (<span class="type">double</span>)<span class="function">rand</span>() / RAND_MAX * <span class="number">2</span> - <span class="number">1</span>
        );
    }
    
    <span class="comment">// Perform mapping</span>
    <span class="keyword">auto</span> stats = mapper.<span class="function">performMapping</span>(dataSymbols, <span class="number">2</span>);
    
    <span class="comment">// Display results</span>
    cout &lt;&lt; <span class="string">"
RE Mapping Statistics:
"</span>;
    cout &lt;&lt; <span class="string">"Total REs:   "</span> &lt;&lt; stats[<span class="string">"total"</span>] &lt;&lt; <span class="string">"
"</span>;
    cout &lt;&lt; <span class="string">"Data REs:    "</span> &lt;&lt; stats[<span class="string">"data"</span>] &lt;&lt; <span class="string">" ("</span> 
         &lt;&lt; (<span class="number">100.0</span> * stats[<span class="string">"data"</span>] / stats[<span class="string">"total"</span>]) &lt;&lt; <span class="string">"%)</span>
<span class="string">"</span>;
    cout &lt;&lt; <span class="string">"DMRS REs:    "</span> &lt;&lt; stats[<span class="string">"dmrs"</span>] &lt;&lt; <span class="string">" ("</span>
         &lt;&lt; (<span class="number">100.0</span> * stats[<span class="string">"dmrs"</span>] / stats[<span class="string">"total"</span>]) &lt;&lt; <span class="string">"%)</span>
<span class="string">"</span>;
    cout &lt;&lt; <span class="string">"PT-RS REs:   "</span> &lt;&lt; stats[<span class="string">"ptrs"</span>] &lt;&lt; <span class="string">" ("</span>
         &lt;&lt; (<span class="number">100.0</span> * stats[<span class="string">"ptrs"</span>] / stats[<span class="string">"total"</span>]) &lt;&lt; <span class="string">"%)</span>
<span class="string">"</span>;
    cout &lt;&lt; <span class="string">"Control REs: "</span> &lt;&lt; stats[<span class="string">"control"</span>] &lt;&lt; <span class="string">" ("</span>
         &lt;&lt; (<span class="number">100.0</span> * stats[<span class="string">"control"</span>] / stats[<span class="string">"total"</span>]) &lt;&lt; <span class="string">"%)</span>
<span class="string">"</span>;
    
    <span class="type">double</span> efficiency = mapper.<span class="function">calculateSpectralEfficiency</span>();
    cout &lt;&lt; <span class="string">"
Spectral Efficiency: "</span> &lt;&lt; efficiency &lt;&lt; <span class="string">" bits/RE
"</span>;
    
    <span class="comment">// Print grid visualization</span>
    mapper.<span class="function">printGrid</span>();
    
    cout &lt;&lt; <span class="string">"
Mapping completed successfully!
"</span>;
    
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
            </div>
        </div>

        <div class="highlight-box">
            <h4><i class="fas fa-code-branch"></i> Code Highlights</h4>
            <p>
                This implementation demonstrates the core RE mapping algorithm used in 5G NR physical layer. Key features include: (1) Flexible DMRS pattern support for Type 1 and Type 2 configurations, (2) PT-RS mapping for phase noise compensation in mmWave scenarios, (3) Dynamic control channel allocation, (4) Efficient data symbol mapping avoiding reference signal positions, and (5) Comprehensive statistics calculation for performance analysis. The code uses a frequency-first, time-second mapping order consistent with 3GPP specifications.
            </p>
        </div>
    </section>

    <!-- Performance Metrics -->
    <section class="section">
        <div class="section-header">
            <i class="fas fa-chart-line"></i>
            <h2>Performance Metrics</h2>
        </div>

        <div class="grid-2">
            <div class="info-card">
                <h3><i class="fas fa-tachometer-alt"></i> Throughput Analysis</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Configuration</th>
                            <th>Data REs</th>
                            <th>Max Throughput</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>10 MHz, μ=0, 64-QAM</td>
                            <td>~40,000</td>
                            <td>~24 Mbps</td>
                        </tr>
                        <tr>
                            <td>20 MHz, μ=1, 64-QAM</td>
                            <td>~80,000</td>
                            <td>~96 Mbps</td>
                        </tr>
                        <tr>
                            <td>100 MHz, μ=1, 256-QAM</td>
                            <td>~400,000</td>
                            <td>~640 Mbps</td>
                        </tr>
                        <tr>
                            <td>400 MHz, μ=3, 256-QAM</td>
                            <td>~1,600,000</td>
                            <td>~5.12 Gbps</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="info-card">
                <h3><i class="fas fa-percentage"></i> RE Utilization</h3>
                <div style="margin: 20px 0;">
                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>Data REs</span>
                            <span style="color: var(--primary-teal); font-weight: 700;">~71%</span>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); height: 10px; border-radius: 5px; overflow: hidden;">
                            <div style="background: linear-gradient(90deg, var(--primary-teal), var(--primary-cyan)); width: 71%; height: 100%;"></div>
                        </div>
                    </div>

                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>DMRS REs</span>
                            <span style="color: var(--accent-orange); font-weight: 700;">~14%</span>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); height: 10px; border-radius: 5px; overflow: hidden;">
                            <div style="background: linear-gradient(90deg, var(--accent-orange), #ea580c); width: 14%; height: 100%;"></div>
                        </div>
                    </div>

                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>Control REs</span>
                            <span style="color: var(--primary-purple); font-weight: 700;">~12%</span>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); height: 10px; border-radius: 5px; overflow: hidden;">
                            <div style="background: linear-gradient(90deg, var(--primary-purple), #9333ea); width: 12%; height: 100%;"></div>
                        </div>
                    </div>

                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>Other (PT-RS, CSI-RS)</span>
                            <span style="color: var(--primary-cyan); font-weight: 700;">~3%</span>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); height: 10px; border-radius: 5px; overflow: hidden;">
                            <div style="background: linear-gradient(90deg, var(--primary-cyan), #0891b2); width: 3%; height: 100%;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Use Cases -->
    <section class="section">
        <div class="section-header">
            <i class="fas fa-rocket"></i>
            <h2>5G NR RE Mapping Use Cases</h2>
        </div>

        <div class="grid-3">
            <div class="feature-card">
                <i class="fas fa-mobile-alt"></i>
                <h4>Enhanced Mobile Broadband (eMBB)</h4>
                <p>High-density RE mapping with 256-QAM modulation for maximum throughput in urban areas. Supports 4K/8K video streaming, AR/VR applications, and cloud gaming with multi-Gbps speeds.</p>
            </div>

            <div class="feature-card">
                <i class="fas fa-industry"></i>
                <h4>Ultra-Reliable Low-Latency (URLLC)</h4>
                <p>Mini-slot level RE mapping with front-loaded DMRS for sub-millisecond latency. Critical for industrial automation, autonomous vehicles, and remote surgery applications.</p>
            </div>

            <div class="feature-card">
                <i class="fas fa-satellite-dish"></i>
                <h4>Massive IoT (mMTC)</h4>
                <p>Sparse RE mapping optimized for narrowband devices and extended coverage. Supports smart cities, agriculture sensors, and asset tracking with millions of connected devices.</p>
            </div>
        </div>
    </section>

</div>

<footer>
 <h3>Designed By Group 3</h3>
</footer>

<script>
    // Generate RE Map Grid Visualization
    function generateREMap() {
        const grid = document.getElementById('reMapGrid');
        grid.innerHTML = '';
        
        // Pattern: 12 subcarriers × 14 OFDM symbols = 168 REs
        const totalREs = 168;
        const symbols = 14;
        const subcarriers = 12;
        
        // Define RE types based on typical 5G NR pattern
        for (let sc = 0; sc < subcarriers; sc++) {
            for (let sym = 0; sym < symbols; sym++) {
                const re = document.createElement('div');
                re.className = 're-cell';
                
                // Control symbols (first 2 symbols)
                if (sym < 2) {
                    re.classList.add('re-control');
                    re.title = `Control - SC:${sc} Sym:${sym}`;
                }
                // DMRS Type 1 pattern (symbols 2, 11 - even subcarriers)
                else if ((sym === 2 || sym === 11) && sc % 2 === 0) {
                    re.classList.add('re-dmrs');
                    re.title = `DMRS - SC:${sc} Sym:${sym}`;
                }
                // PT-RS (every 4th subcarrier, avoid DMRS symbols)
                else if (sc % 4 === 0 && sym !== 2 && sym !== 11) {
                    re.classList.add('re-ptrs');
                    re.title = `PT-RS - SC:${sc} Sym:${sym}`;
                }
                // CSI-RS (symbol 13, specific subcarriers)
                else if (sym === 13 && (sc === 1 || sc === 5 || sc === 9)) {
                    re.classList.add('re-csirs');
                    re.title = `CSI-RS - SC:${sc} Sym:${sym}`;
                }
                // Data REs (remaining)
                else {
                    re.classList.add('re-data');
                    re.title = `Data - SC:${sc} Sym:${sym}`;
                }
                
                grid.appendChild(re);
            }
        }
    }

    // Animate statistics on scroll
    function animateStats() {
        const statBoxes = document.querySelectorAll('.stat-box');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'fadeInUp 0.8s ease-out';
                }
            });
        }, { threshold: 0.1 });
        
        statBoxes.forEach(box => observer.observe(box));
    }

    // Animate process flow
    function animateProcessFlow() {
        const processSteps = document.querySelectorAll('.process-step');
        
        processSteps.forEach((step, index) => {
            step.style.animation = `fadeInUp 0.6s ease-out ${index * 0.2}s both`;
        });
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', () => {
        generateREMap();
        animateStats();
        
        // Trigger process flow animation when in view
        const processFlow = document.querySelector('.process-flow');
        if (processFlow) {
            const observer = new IntersectionObserver((entries) => {
                if (entries[0].isIntersecting) {
                    animateProcessFlow();
                    observer.disconnect();
                }
            }, { threshold: 0.2 });
            
            observer.observe(processFlow);
        }
    });

    // Add hover effect to RE cells
    document.addEventListener('DOMContentLoaded', () => {
        const reCells = document.querySelectorAll('.re-cell');
        reCells.forEach(cell => {
            cell.addEventListener('mouseenter', () => {
                cell.style.zIndex = '100';
            });
            cell.addEventListener('mouseleave', () => {
                cell.style.zIndex = '1';
            });
        });
    });

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    });
</script>

</body>
</html>
